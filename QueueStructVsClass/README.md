# Using a Struct vs a Class when populating a queue

// * Summary *

BenchmarkDotNet=v0.12.1, OS=Windows 10.0.21370
Intel Xeon W-2123 CPU 3.60GHz, 1 CPU, 8 logical and 4 physical cores
.NET Core SDK=5.0.202
  [Host]   : .NET Core 5.0.5 (CoreCLR 5.0.521.16609, CoreFX 5.0.521.16609), X64 RyuJIT
  ShortRun : .NET Core 5.0.5 (CoreCLR 5.0.521.16609, CoreFX 5.0.521.16609), X64 RyuJIT

Job=ShortRun  IterationCount=3  LaunchCount=1
WarmupCount=3

|           Method |   Count |             Mean |            Error |         StdDev | Ratio | RatioSD |       Gen 0 |       Gen 1 |     Gen 2 |     Allocated |
|----------------- |-------- |-----------------:|-----------------:|---------------:|------:|--------:|------------:|------------:|----------:|--------------:|
| QueueUsingStruct |      10 |         4.091 us |         1.626 us |      0.0891 us |  0.94 |    0.04 |      9.8038 |           - |         - |      41.33 KB |
|  QueueUsingClass |      10 |         4.352 us |         4.619 us |      0.2532 us |  1.00 |    0.00 |      9.9182 |      0.0153 |         - |       41.8 KB |
|                  |         |                  |                  |                |       |         |             |             |           |               |
| QueueUsingStruct |     100 |        50.845 us |        40.589 us |      2.2248 us |  1.06 |    0.07 |     78.9795 |     39.3677 |         - |     413.28 KB |
|  QueueUsingClass |     100 |        48.177 us |        28.124 us |      1.5416 us |  1.00 |    0.00 |     87.7686 |     17.5171 |         - |     417.97 KB |
|                  |         |                  |                  |                |       |         |             |             |           |               |
| QueueUsingStruct |    1000 |       618.564 us |       892.082 us |     48.8980 us |  0.91 |    0.09 |    772.4609 |    239.2578 |         - |    4132.81 KB |
|  QueueUsingClass |    1000 |       681.782 us |     1,013.075 us |     55.5300 us |  1.00 |    0.00 |    774.4141 |    282.2266 |         - |    4179.69 KB |
|                  |         |                  |                  |                |       |         |             |             |           |               |
| QueueUsingStruct |   10000 |    30,662.529 us |    40,920.872 us |  2,243.0111 us |  1.04 |    0.10 |   7437.5000 |   3062.5000 | 1000.0000 |   41328.91 KB |
|  QueueUsingClass |   10000 |    29,543.202 us |    11,025.742 us |    604.3581 us |  1.00 |    0.00 |   7468.7500 |   3000.0000 |  968.7500 |    41797.6 KB |
|                  |         |                  |                  |                |       |         |             |             |           |               |
| QueueUsingStruct |  100000 |   464,132.233 us |   739,423.318 us | 40,530.2872 us |  1.03 |    0.20 |  71000.0000 |  26000.0000 | 4000.0000 |  413285.98 KB |
|  QueueUsingClass |  100000 |   459,286.000 us | 1,127,303.549 us | 61,791.3114 us |  1.00 |    0.00 |  72000.0000 |  27000.0000 | 4000.0000 |  417974.88 KB |
|                  |         |                  |                  |                |       |         |             |             |           |               |
| QueueUsingStruct | 1000000 | 4,089,415.767 us | 1,368,039.403 us | 74,986.8559 us |  0.91 |    0.02 | 682000.0000 | 244000.0000 | 8000.0000 | 4132836.88 KB |
|  QueueUsingClass | 1000000 | 4,491,414.633 us |   667,370.620 us | 36,580.8356 us |  1.00 |    0.00 | 690000.0000 | 244000.0000 | 8000.0000 | 4179703.82 KB |

``` ini

BenchmarkDotNet=v0.13.3, OS=Windows 11 (10.0.22631.3007), VM=Hyper-V
AMD EPYC 7763, 1 CPU, 16 logical and 8 physical cores
.NET SDK=8.0.101
  [Host]     : .NET 8.0.1 (8.0.123.58001), X64 RyuJIT AVX2
  DefaultJob : .NET 8.0.1 (8.0.123.58001), X64 RyuJIT AVX2


```
|           Method |   Count |             Mean |          Error |          StdDev | Ratio | RatioSD |        Gen0 |        Gen1 |      Gen2 |     Allocated | Alloc Ratio |
|----------------- |-------- |-----------------:|---------------:|----------------:|------:|--------:|------------:|------------:|----------:|--------------:|------------:|
| **QueueUsingStruct** |      **10** |         **1.534 μs** |      **0.0305 μs** |       **0.0603 μs** |  **0.99** |    **0.05** |      **2.5291** |      **0.1678** |         **-** |      **41.33 KB** |        **0.99** |
|  QueueUsingClass |      10 |         1.558 μs |      0.0294 μs |       0.0466 μs |  1.00 |    0.00 |      2.5578 |      0.1698 |         - |       41.8 KB |        1.00 |
|                  |         |                  |                |                 |       |         |             |             |           |               |             |
| **QueueUsingStruct** |     **100** |        **15.403 μs** |      **0.3044 μs** |       **0.5489 μs** |  **0.94** |    **0.03** |     **25.2838** |     **11.8713** |         **-** |     **413.28 KB** |        **0.99** |
|  QueueUsingClass |     100 |        16.375 μs |      0.3264 μs |       0.6955 μs |  1.00 |    0.00 |     25.5737 |     14.2517 |         - |     417.97 KB |        1.00 |
|                  |         |                  |                |                 |       |         |             |             |           |               |             |
| **QueueUsingStruct** |    **1000** |       **233.357 μs** |      **2.5639 μs** |       **2.3983 μs** |  **0.98** |    **0.01** |    **252.9297** |    **239.0137** |         **-** |    **4132.81 KB** |        **0.99** |
|  QueueUsingClass |    1000 |       237.858 μs |      2.3249 μs |       2.0610 μs |  1.00 |    0.00 |    255.6152 |    240.2344 |         - |    4179.69 KB |        1.00 |
|                  |         |                  |                |                 |       |         |             |             |           |               |             |
| **QueueUsingStruct** |   **10000** |    **16,602.228 μs** |    **329.2774 μs** |     **461.6009 μs** |  **0.99** |    **0.05** |   **3343.7500** |   **3281.2500** | **1000.0000** |   **41329.56 KB** |        **0.99** |
|  QueueUsingClass |   10000 |    16,902.159 μs |    337.4176 μs |     711.7283 μs |  1.00 |    0.00 |   3375.0000 |   3281.2500 |  968.7500 |   41798.17 KB |        1.00 |
|                  |         |                  |                |                 |       |         |             |             |           |               |             |
| **QueueUsingStruct** |  **100000** |   **186,123.305 μs** |  **3,705.6007 μs** |   **8,949.4421 μs** |  **0.96** |    **0.06** |  **27333.3333** |  **27000.0000** | **2333.3333** |  **413285.73 KB** |        **0.99** |
|  QueueUsingClass |  100000 |   193,497.906 μs |  3,832.0009 μs |   9,399.9634 μs |  1.00 |    0.00 |  28500.0000 |  28000.0000 | 3000.0000 |  417974.81 KB |        1.00 |
|                  |         |                  |                |                 |       |         |             |             |           |               |             |
| **QueueUsingStruct** | **1000000** | **1,880,870.667 μs** | **37,480.7567 μs** |  **95,400.4928 μs** |  **0.97** |    **0.08** | **260000.0000** | **259000.0000** | **8000.0000** | **4132833.29 KB** |        **0.99** |
|  QueueUsingClass | 1000000 | 1,943,674.002 μs | 38,765.2282 μs | 102,799.8860 μs |  1.00 |    0.00 | 263000.0000 | 262000.0000 | 8000.0000 | 4179701.69 KB |        1.00 |
